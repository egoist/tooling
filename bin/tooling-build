#!/usr/bin/env node
process.env.NODE_ENV = 'production'
const meow = require('meow')
const chalk = require('chalk')
const handleError = require('../lib/handle-error')

const cli = meow({
  description: false,
  help: `
  Run tooling in production mode

  ${chalk.bold('Options:')}

    ${chalk.yellow('-c, --config [path]')}       ${chalk.dim('Load config file')}
    ${chalk.yellow('-a, --adapter [path]')}      ${chalk.dim('Load adapter')}
    ${chalk.yellow('-d, --dist [folder]')}       ${chalk.dim('Directory for output files')}
    ${chalk.yellow('-l, --lib [libraryName]')}   ${chalk.dim('Distribute component in UMD format')}
\t`
}, {
  alias: {
    h: 'help',
    c: 'config',
    d: 'dist',
    l: 'lib'
  }
})

const options = Object.assign({
  entry: cli.input[0],
  mode: 'build'
}, cli.flags)

try {
  require('../lib')(options).catch(handleError)
} catch (err) {
  handleError(err)
}
