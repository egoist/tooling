#!/usr/bin/env node
process.env.NODE_ENV = 'development'
const meow = require('meow')
const chalk = require('chalk')
const handleError = require('../lib/handle-error')

const cli = meow({
  description: false,
  help: `
  Run tooling in development mode

  ${chalk.bold('Options:')}

    ${chalk.yellow('-c, --config [path]')}    ${chalk.dim('Load config file')}
    ${chalk.yellow('-a, --adapter [path]')}   ${chalk.dim('Load adapter')}
    ${chalk.yellow('-p, --port [port]')}      ${chalk.dim('Server port')}
    ${chalk.yellow('-d, --dist [folder]')}    ${chalk.dim('Directory for output files')}
    ${chalk.yellow('--proxy [url]')}          ${chalk.dim('Proxy API request')}
\t`
}, {
  alias: {
    h: 'help',
    c: 'config',
    a: 'adapter',
    p: 'port',
    d: 'dist'
  }
})

const options = Object.assign({
  entry: cli.input[0],
  mode: 'dev'
}, cli.flags)

try {
  require('../lib')(options)
} catch (err) {
  handleError(err)
}
